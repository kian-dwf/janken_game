<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ブラウザで遊べる戦略的カードゲーム「死闘！！ジャンケン」。ジョーカーを駆使してジャンケンマスターを打ち破れ！">
    <meta name="keywords" content="ジャンケン, ゲーム, ブラウザゲーム, カードゲーム">
    <title>死闘！！ジャンケン ver1.0.1</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <audio id="bgm" src="audio/タンヤオ.mp3" loop></audio>

    <div class="page-wrapper">
        
        <div id="game-container">
            <h1 class="game-title">死闘！！ジャンケン <span class="version">ver1.0.1</span></h1>
            
            <div id="master-area" class="player-area">
                <div class="status">
                    <p>ジャンケンマスターLV1</p>
                    <img id="master-expression" src="images/master_angry.png" alt="ジャンケンマスター">
                    <p>勝ち点: <span id="master-score">0</span></p>
                </div>
                <div class="deck-info">
                    <div>
                        <p>山札: <span id="master-deck-count">13</span></p>
                        <p>手札: <span id="master-hand-count">3</span></p>
                    </div>
                    <button class="discard-pile-button" data-target="master">捨て札</button>
                </div>
            </div>

            <div id="field-area">
                <div id="master-field" class="field-card-container">
                    <div id="master-joker-status" class="joker-status"></div>
                    <img src="images/card_back.png" class="field-card" id="master-played-card-img" alt="マスターのカード">
                </div>
                <div id="message-area">
                    <p id="message">手札からカードを選んでください</p>
                    <p id="turn-counter">ターン: 1</p>
                </div>
                <div id="player-field" class="field-card-container">
                    <div id="player-joker-status" class="joker-status"></div>
                    <img src="images/card_back.png" class="field-card" id="player-played-card-img" alt="あなたのカード">
                </div>
            </div>
            
            <div id="player-area" class="player-area">
                <div class="status">
                    <p>挑戦者</p>
                    <p>勝ち点: <span id="player-score">0</span></p>
                </div>
                <div id="player-hand" class="hand"></div>
                <div class="deck-info">
                    <div>
                        <p>山札: <span id="player-deck-count">13</span></p>
                        <button id="redraw-button">手札引き直し (1回)</button>
                    </div>
                    <button class="discard-pile-button" data-target="player">捨て札</button>
                </div>
            </div>
        </div>

        <div id="info-sidebar">
            <div class="info-section">
                <h2>ゲームルール</h2>
                <ul>
                    <li>グー・チョキ・パー各5枚、ジョーカー1枚の計16枚のカードで戦います。</li>
                    <li>初期手札は3枚。毎ターン1枚ずつ使用し、山札から補充します。</li>
                    <li>相手に勝つと勝ち点1を獲得。山札と手札が尽きた時点での勝ち点で勝敗が決まります。</li>
                </ul>
                <h3>特殊カード：ジョーカー</h3>
                <ul>
                    <li>ジョーカーは全てのカードに勝ちます。</li>
                    <li>場に出すと、以降のターンであいこでも勝ち点1が入るようになります。</li>
                    <li>相手のジョーカーは、あなたがジャンケンに「勝つ」ことで無効化できます。</li>
                    <li>相手のジョーカーが場にある時、あなたはジョーカーを出せません。</li>
                </ul>
                 <h3>特殊ルール</h3>
                <ul>
                    <li><b>引き分け時:</b> サドンデスに突入し、裏向きの3枚から1枚を選んで勝負を決めます。</li>
                    <li><b>手札引き直し:</b> 挑戦者は試合中に一度だけ、手札を全て山札に戻し引き直せます。</li>
                </ul>
            </div>

            <div class="info-section">
                <h2>改善要望フォーム</h2>
                <p>ゲームの感想や「もっとこうしてほしい！」というご意見をぜひお聞かせください。</p>
                <iframe src="https://forms.gle/bR7LPo1M48iJXbiw7" width="100%" height="400" frameborder="0" marginheight="0" marginwidth="0">読み込んでいます…</iframe>
                </div>
                  <div class="info-section creator-info">
                <img src="images/hato.jpg" alt="製作者アイコン" class="creator-icon">
                <p>製作者：下北沢にいたハト（20）</p>
                <p>このページはプログラムの練習用に制作しているページになります。<br>ゲーム体験をより良いものにする為に随時アップデートしていく予定です。<br>現在ポイ活にハマっているのでこちらの招待リンク⇩を踏んでポイ活に協力してくれると開発のモチベーションになります。</p>
                <img src="images/tiktoklite_qr.png" alt="ポイ活QRコード" class="poikatsu-qr">
            </div>
        </div>

    </div><div id="player-active-joker-display" class="active-joker-display left hidden"></div>
    <div id="master-active-joker-display" class="active-joker-display right hidden"></div>

    <div id="discard-pile-overlay" class="hidden overlay">
        <div id="discard-pile-modal" class="modal">
            <h2>捨て札一覧</h2>
            <div class="discard-section">
                <h3>あなたの捨て札 (<span id="player-discard-count">0</span>枚)</h3>
                <div id="player-discard-area" class="discard-cards-container"></div>
            </div>
            <div class="discard-section">
                <h3>マスターの捨て札 (<span id="master-discard-count">0</span>枚)</h3>
                <div id="master-discard-area" class="discard-cards-container"></div>
            </div>
            <button id="close-discard-button">閉じる</button>
        </div>
    </div>

    <div id="sudden-death-overlay" class="hidden overlay">
        <div id="sudden-death-modal" class="modal">
            <h2>サドンデス</h2>
            <p>スコアが同じため、サドンデスに突入しました。<br>一枚だけカードを選び、勝負を決めてください！</p>
            <div id="sudden-death-cards"></div>
        </div>
    </div>
    
    <div id="game-over-overlay" class="hidden overlay">
        <div id="game-over-modal" class="modal">
            <h2 id="game-over-title"></h2>
            <p id="game-over-message"></p>
            <button id="restart-button">もう一度挑戦する</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>